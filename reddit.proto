syntax = "proto3";

package reddit;

service RedditService {
    // Create a Post
    rpc CreatePost (Post) returns (PostResponse);

    // TODO: add other required methods
}

message PostResponse {
    string message = 1;
}

message User {
    string user_id = 1;  // A human-readable user ID
}

message Post {
    string title = 1;
    string text = 2;
    oneof media {
        string image_url = 3;
        string video_url = 4;
    }
    string author = 5;  // Optional
    int32 score = 6;    // Can be negative
    enum State {
        NORMAL = 0;
        LOCKED = 1;
        HIDDEN = 2;
    }
    State state = 7;
    string publication_date = 8;  // TODO: Consider using a proper timestamp type
}

message Comment {
    string text = 1;
    string author = 2;  // Always required for comments
    int32 score = 3;
    enum Status {
        NORMAL = 0;
        HIDDEN = 1;
    }
    Status status = 4;
    string publication_date = 5;  // TODO: Consider using a proper timestamp type
    // TODO: Reference to parent Post or Comment could be added here
}

